
\begin{exercise}{4.15}
  Define
  \[
    E_n = \left\{ x \in E : \lvert f_k(x) \rvert \le n
    \text{ for all $k$ and all $x \in E$} \right\}.
  \]
  Then for each $x \in E$,
  we have $x \in E_n$ for all $n \ge M_x$,
  so $E = \bigcup E_n$.
  Since $E_n$ is increasing,
  we have $\lim \mea{E_n} = \mea{E} < +\infty$.
  Therefore, we can select $M \in \bbZ^+$ so large that
  $\mea{E - E_M} = \mea{E} - \mea{E_M} < \epsilon/2$,
  and in turn select a closed set $F \subset E_M$ such that
  $\mea{E_M - F} < \epsilon/2$.
  It follows that $\mea{E - F} \le \mea{E - E_M} + \mea{E_M - F} < \epsilon$,
  and for each $x \in F$ we have
  $\lvert f_k(x) \rvert \le M$ for all $k$.
\end{exercise}

\begin{exercise}{4.16}
  Recall that $f_k \xrightarrow{m} f$ if for every $\epsilon > 0$,
  \begin{equation}
    \lim_{k \rightarrow \infty} \mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}} = 0.
    \label{eq:defOfCvgInMeasure}
  \end{equation}
  Assume $f_k \xrightarrow{m} f$.
  Given $\epsilon > 0$,
  there exists, according to~\eqref{eq:defOfCvgInMeasure}, a $K$ such that
  $\mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}} < \epsilon$
  for all $k > K$.

  Conversely, assume for each $\epsilon > 0$ there exists a $K$ such that
  $\mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}} < \epsilon$
  for all $k > K$.
  Then for each $\epsilon > 0$ and each $\epsilon_1 > 0$,
  we can take $\delta = \min \left\{ \epsilon, \epsilon_1 \right\} > 0$,
  and by assumption there exists a $K$ such that
  $\mea{\left\{ \lvert f - f_k \rvert > \delta \right\}} < \delta$
  for all $k > K$.
  Then
  \[
    \mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}}
    \le \mea{\left\{ \lvert f - f_k \rvert > \delta \right\}}
    < \delta \le \epsilon_1
  \]
  for all $k > K$, which shows exactly $f_k \xrightarrow{m} f$.

  An analogous Cauchy criterion is that
  $\{f_k\}$ is Cauchy in measure if and only if
  for each $\epsilon > 0$,
  there exists a $K$ such that
  \[
    \mea{\left\{ \lvert f_j - f_k \rvert > \epsilon \right\}} < \epsilon
  \]
  for all $j, k > K$.
\end{exercise}

\begin{lemma}
  If $g$ is finite a.e.,
  then for each $\epsilon > 0$
  there exist a subset $F$ of $E$ and a sufficiently large $M$ such that
  $\mea{E - F} < \epsilon$ and $\lvert g \rvert \le M$ on $F$.
\end{lemma}
\begin{proof}
  This is a special case of Exercise 4.15.
\end{proof}

\begin{exercise}{4.17}
  Suppose $f_k \xrightarrow{m} f$ and $g_k \xrightarrow{m} g$ on $E$.
  First we show $f_k + g_k \xrightarrow{m} f+g$.
  Given $\epsilon > 0$,
  we can select $K$ so large that
  \[
      \mea{\left\{ \lvert f - f_k \rvert > \frac{\epsilon}{2} \right\}} < \frac{\epsilon}{2},
      \quad
      \mea{\left\{ \lvert g - g_k \rvert > \frac{\epsilon}{2} \right\}} < \frac{\epsilon}{2},
  \]
  for all $k \ge K$.
  Since $\lvert (f_k + g_k) - (f+g) \rvert \le
  \lvert f_k - f \rvert + \lvert g_k - g \rvert$,
  we have
  \[
    \mea{\left\{ \lvert (f_k + g_k) - (f+g) \rvert > \epsilon \right\}} \le
    \mea{\left\{ \lvert f_k - f \rvert > \frac{\epsilon}{2} \right\}}
    + \mea{\left\{ \lvert g_k - g \rvert > \frac{\epsilon}{2} \right\}}
    < \frac{\epsilon}{2} + \frac{\epsilon}{2} = \epsilon
  \]
  for all $k \ge K$, which shows that $f_k + g_k \xrightarrow{m} f + g$.

  Suppose further that $\mea{E} < +\infty$.
  For each $\epsilon > 0$,
  we first invoke the preceding Lemma to select $M$ such that
  \[
    \mea{\left\{ \lvert f \rvert > M \right\}} < \epsilon/6, \quad
    \mea{\left\{ \lvert g \rvert > M \right\}} < \epsilon/6.
  \]
  Let $\delta = \min\left\{ \epsilon/3, \epsilon/3M, 1 \right\}$.
  By convergence in measure we can select $K$ so large that
  \[
    \mea{\left\{ \lvert f_k - f \rvert > \delta \right\}} < \epsilon/6, \quad
    \mea{\left\{ \lvert g_k - g \rvert > \delta \right\}} < \epsilon/6,
  \]
  for all $k \ge K$.
  Then we have
  \[
    \mea{\left\{ \lvert f_k - f)(g_k - g) \rvert > \epsilon/3 \right\} }
    \le \mea{\left\{ \lvert f_k - f \rvert > \epsilon/3 \right\}}
    + \mea{\left\{ \lvert g_k - g \rvert > 1 \right\}}
    < \epsilon/6 + \epsilon/6 = \epsilon/3.
  \]
  Moreover, we have
  \[
    \mea{\left\{ \lvert f (g_k - g) \rvert > \epsilon/3 \right\}}
    \le \mea{\left\{ \lvert f \rvert > M \right\}}
    + \mea{\left\{ \lvert g_k - g \rvert > \frac{\epsilon}{3M} \right\}}
    < \epsilon/6 + \epsilon/6 = \epsilon/3,
  \]
  and the same argument suggests
  \[
    \mea{\left\{ \lvert g (f_k - f) \rvert > \epsilon/3 \right\}} < \epsilon/3.
  \]
  Writing $f_k g_k - fg = (f_k - f)(g_k - g) + f(g_k - g) + g(f_k - f)$,
  we obtain
  \[
    \begin{aligned}
      \mea{\left\{ \lvert f_k g_k - fg \rvert \right\} > \epsilon}
      \le &\mea{\left\{ \lvert f_k - f)(g_k - g) \rvert > \epsilon/3 \right\} } \\
      + &\mea{\left\{ \lvert f (g_k - g) \rvert > \epsilon/3 \right\}} \\
      + &\mea{\left\{ \lvert g (f_k - f) \rvert > \epsilon/3 \right\}} \\
      < &\epsilon
    \end{aligned}
  \]
  for all $k \ge K$, which shows that $f_k g_k \xrightarrow{m} fg$.

  Finally suppose $g_k \rightarrow g$ on $E$ and $g \neq 0$ a.e.
  Since $\mea{E} < +\infty$, $1/g_k \rightarrow 1/g$ and $1/g$ is finite a.e.,
  Theorem 4.21 suggests that $1/g_k \xrightarrow{m} 1/g$.
  It follows immediately from the last case that $f_k/g_k \xrightarrow{m} f/g$.
\end{exercise}

\begin{exercise}{4.18}
  For the first part, fix $a \in (-\infty, +\infty)$.
  For each $x \in E$,
  it follows from $f_k \nearrow f$ that
  $f(x) > a$ if and only if $f_k(x) > a$ for all some $k$.
  That is, $\left\{ f > a \right\} = \bigcup_{k=1}^{\infty} \left\{ f_k > a \right\}$.
  Since $\left\{ f_k > a \right\}$ is increasing,
  we see that $\omega_{f_k}(a) = \mea{\left\{ f_k > a \right\}} \nearrow
  \mea{\left\{ f > a \right\}} = \omega_f(a)$ as $k \rightarrow \infty$.

  Now suppose $f_k \xrightarrow{m} f$.
  For each $\epsilon > 0$, we have
  \[
    \omega_f(a + \epsilon) = \mea{\left\{ f > a + \epsilon \right\}} \le
    \mea{\left\{ f_k > a \right\}} + \mea{\left\{ \lvert f_k - f \rvert > \epsilon \right\}}
    = \omega_{f_k}(a) + \mea{\left\{ \lvert f_k - f \rvert > \epsilon \right\}}.
  \]
  But $f_k \xrightarrow{m} f$ implies that
  $\mea{\left\{ \lvert f_k - f \rvert > \epsilon \right\}} \rightarrow 0$
  as $k \rightarrow \infty$;
  taking limit inferior of the last inequality we obtain
  \[
    \omega_f(a + \epsilon) \le \liminf_{k \rightarrow \infty} \omega_{f_k}(a).
  \]
  Since $\epsilon > 0$ is arbitrary,
  by letting $\epsilon \rightarrow 0^+$ we see that
  $\omega_f(a) \le \liminf \omega_{f_k}(a)$
  provided $\omega_f$ is continuous at $a$.
  A similar argument shows that $\limsup \omega_{f_k}(a) \le \omega_f(a)$.
  We conclude that $\lim \omega_{f_k}(a) = \omega_f(a)$
  provided $\omega_f$ is continuous at $a$.
\end{exercise}

\begin{exercise}{5.10}
  Suppose $p > 0$ and $\int_E \lvert f_k - f \rvert^p \rightarrow 0$.
  First we claim that $f_k \xrightarrow{m} f$ on $E$ (Exercise 5.9).
  Given $\epsilon > 0$, Chebyshev's inequality states that
  \[
    \mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}}
    \le \frac{1}{\epsilon^p} \int_E \lvert f_k - f \rvert^p.
  \]
  Letting $k \rightarrow \infty$
  we see that $\mea{\left\{ \lvert f - f_k \rvert > \epsilon \right\}} \rightarrow 0$
  as $k \rightarrow \infty$,
  which is exactly $f_k \xrightarrow{m} f$.

  By Theorem 4.22, there exists a subsequence $\{f_{k_j}\} \rightarrow f$ a.e.\ in $E$.
  If $\int_E \lvert f_k \rvert^p \le M$ for all $k$,
  we conclude by Fatou's Lemma that
  \[
    \int_E \lvert f \rvert^p = \int_E \lim \lvert f_{k_j} \rvert^p
    \le \liminf \int_E \lvert f_{k_j} \rvert^p \le M.
    \qedhere
  \]
\end{exercise}

\begin{exercise}{5.18}
  The result of Exercise 5.16 suggests that if $0 < p < \infty$ and $f \ge 0$, then
  \[
    \int_E f^p = p \int_0^{\infty} \alpha^{p-1} \omega(\alpha) \rmd \alpha,
  \]
  regardless of the finiteness of either $\mea{E}$ or $\lVert f \rVert_p$.
  By definition of improper Riemann integral, we have
  \[
    \int_0^\infty \alpha^{p-1} \omega(\alpha) \rmd \alpha =
    \sum_{k = -\infty}^{+\infty}
    \int_{2^k}^{2^{k+1}} \alpha^{p-1} \omega(\alpha) \rmd \alpha
    \coloneqq \sum_{k = -\infty}^{+\infty} I_k.
  \]
  Since $\omega$ is decreasing, we have
  \[
    2^k \cdot 2^{k(p-1)} \omega(2^{k+1}) \le I_k \le 2^k \cdot 2^{(k+1)(p-1)} \omega(2^k).
  \]
  Simplifying, we obtain
  \[
    2^{-p} 2^{(k+1)p} \omega(2^{k+1}) \le I_k \le 2^{p-1} 2^{kp} \omega(2^k).
  \]
  Summing up, we find
  \[
    2^{-p} \sum 2^{(k+1)p} \omega(2^{k+1})
    = 2^{-p} \sum 2^{kp} \omega(2^k)
    \le \int_0^\infty \alpha^{p-1} \omega(\alpha) \rmd \alpha
    \le 2^{p-1} \sum 2^{kp} \omega(2^k).
  \]
  Consequently, all the terms in the above inequalities
  are simultaneously finite or infinite.
  We conclude that $f \in L^p$ if and only if $\sum 2^{kp} \omega(2^k) < + \infty$.
\end{exercise}
